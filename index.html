<html>
    <head>
        <title>Pet Depot</title>
        <script src="https://unpkg.com/vue"></script>
        <link rel="stylesheet" type="text/css" href="css/app.css">
        <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    </head>
    <body>
        <div id="app">
            <header>
                <h1 v-text="title"></h1>
            </header>
            <main>
                <div class="row-product">
                    <div class="col">
                        <figure>
                            <img v-bind:src="product.image">
                        </figure>
                    </div>
                    <div class="col-expand">
                        <h1 v-text="product.title"></h1>
                        <p v-html="product.description"></p>
                        <p class="price">{{ product.price | formatPrice }}</p>
                        <button id="addToCart" v-on:click="addToCart">Add to Cart</button>
                    </div>
                </div>
            </main>
        </div>
        <script type="text/javascript">
            let webstore = new Vue({
                el: '#app',
                data: {
                    title: 'Pet Depot',
                    product: {
                        id: 1001,
                        title: "Cat Food, 25lb bag",
                        description: "A 25 pound bag of <em>irresistible</em>,"+
                        "organic goodness for your cat.",
                        price: 2000,
                        image: "images/product-fullsize.png"
                    },
                    cart: []
                },
                filters: {
                    formatPrice: function(price) {
                        if (!parseInt(price)) return ""
                        if (price > 99999) {
                            let priceString = (price/100).toFixed(2)
                            let priceArray = priceString.split("").reverse()
                            let index = 3
                            while (priceArray.length > index + 3) {
                                priceArray.splice((index + 3), 0, "," )
                                index += 4
                            }
                            let formatted =  priceArray.reverse().join("")
                            return "$" + formatted
                        } else return "$" + (price/100).toFixed(2)
                    }
                },
                methods: {
                    addToCart: function() {
                        this.cart.push(this.product.id)
                    }
                },
                computed: {
                    cartItemCount: function() {
                        return this.cart.length
                    }
                }
            })
        </script>
    </body>
</html>